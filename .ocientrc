source ~/dot_files/i_all.sh

alias eclipse=". ~/launch-eclipse.sh"

base03="0;43;54"
base02="7;54;66"
base01="88;110;117"
base00="101;123;131"
base0="131;148;150"
base1="147;161;161"
base2="238;232;213"
base3="#253;246;227"
yellow="181;137;0"
orange="#203;75;22"
red="#220;50;47"
magenta="211;54;130"
violet="108;113;196"
blue="38;239;210"
cyan="42;161;152"
green="133;153;0"
fg="38;2;"
bg="48;2;"
fgColor="\033[${fg}"
bgColor="\033[${bg}"
endColor="\033[0m"

right=$i_ple_right_half_circle_thick
left=$i_ple_left_half_circle_thick
git_logo=$i_dev_github_badge

parse_git_branch() {
	#git branch 2> /dev/null | sed -e '/^[^*]/d' -e 's/* \(.*\)/ (\1)/' | sed 's/[()]//g'
	__git_ps1 | sed 's/[()]//g'
}

git_branch() {
	echo -e "$fgColor$cyan;$bg${base02}m$(parse_git_branch)$endColor"
}

print_right() {
	echo -e "${sepTwo_right}$(git_branch)${sepOne_right}${gitLogo}"
}

print_left() {
	echo -e "${linuxLogo}${sepOne}${directory}${sepTwo}"
}

stripped_right() {
	sed "s,\x1B\[[0-9;]*[a-zA-Z],,g" <<<"$(print_right)"
}

stripped_left() {
	sed "s,\x1B\[[0-9;]*[a-zA-Z],,g" <<<"$(print_left)"
}

appleLogo="$fgColor$base1;$bg${base03}m $i_fa_apple $endColor"
linuxLogo="$fgColor$base1;$bg${base03}m $i_fa_linux $endColor"
gitLogo="$fgColor$base1;$bg${base03}m$git_logo$endColor"

sepOne="$fgColor$base03;$bg${base02}m$right$endColor"
directory="$fgColor$cyan;$bg${base02}m\w$endColor"
sepTwo="$fgColor$base02;$bg${base03}m$right$endColor"

sepOne_right="$fgColor$base03;$bg${base02}m$left$endColor"
sepTwo_right="$fgColor$base02;$bg${base03}m$left$endColor"

sepThree="$fgColor$base2;$bg${base03}m$right$endColor"
timeStamp="$fgColor$base0;$bg${base2}m\@$endColor"

Save='\033[s'
Rest='\033[u'

export PS2="${linuxLogo}${sepOne}"
#export PS1="\[${Save}\e[${COLUMNS}C\e[${#stripped_right}D$(print_right)${Rest}\]$(print_left)"
compensation=0
export PS1="\[${Save}\033[${COLUMNS}C\033[\$(( \$(stripped_right | wc -m) - ${compensation}))D\$(print_right)${Rest}\]$(print_left)"

xgsrc
